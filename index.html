<!doctype html>
<html>
  <head>
    <title>JAWS Chat</title>
    <!-- JAWS Stands for Javascript and Web Socket-->
    <!-- Credits to the folks at Socket.io for the Socket.io service, and some of the code. This was made for some of my friends to talk to eachother. -->
    <style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  overflow: hidden;
}
input:focus,
select:focus,
textarea:focus,
button:focus {
    outline: none;
}
#header {
  background-color:#263238;
  height: 100px;
  width: 100%;
  box-shadow: 0px 3px 5px 0px rgba(0,0,0,0.75);
  overflow:hidden;
}
#body {
  background-color:#ffffff;
  height: 800px;
  width: 100%;
  box-shadow: inset 0px 3px 5px 0px rgba(0,0,0,0.75);
}
#contactbar {
  height:50px;
  width:100%;
  background-color:#37474F;
  box-shadow: inset 0px 3px 5px 0px rgba(0,0,0,0.75);
  position:absolute;
  top:50px;
  margin:0;
  padding:0;
}
#name {
  font-family: "Roboto", "Sans-Serif";
  margin: 0;
  padding: 0;
  font-size:40px;
  position: absolute;
  top:-1px;
  color: #ffffff;
}
#sendbar {
  position:absolute;
  bottom:0;
  height: 50px;
  width:100%;
  background-color: #263238;
}
#inputbg {
  position:absolute;
  bottom: 12.5px;
  right: 10%;
  border: none;
  height:25px;
  width: 80%;
  box-shadow: 0px 3px 5px 0px rgba(0,0,0,0.75);
  border-radius: 25px;
  background-color: #ffffff;
}
#input {
  position:absolute;
  bottom: -1px;
  left: 2.5%;
  border: none;
  height:25px;
  width: 95%;
  border-radius: 25px;
  background-color: transparent;
  font-family: "Roboto", "Sans-Serif";
  color: black;
  font-size: 20px;
}
#send {
  border-radius: 25px;
  border:none;
  font-family:"Roboto";
  background-color: #ffffff;
  box-shadow: 0px 10px 10px -2px rgba(0,0,0,0.75);
}
.message {
  overflow: hidden;
  width: 100%;
  min-height: 50px;
  height: auto;
  font-family:"Roboto", "Sans-Serif";
  box-shadow: inset 0px 5px 5px -2px rgba(0,0,0,0.75), 0px 3px 5px 0px rgba(0,0,0,0.75);
}
.username {
  position: relative;
  top: 0;
  left: 5px;
  margin: 0;
  padding: 0;
  color: #ECEFF1;
}
.usernamehope {
  position: relative;
  top: 0;
  left: 5px;
  margin: 0;
  padding: 0;
  color: #161616;
}
.timesent {
  text-align:right;
  position: relative;
  top: -17px;
  right: 5px;
  font-size: 10px;
  color: white;
  margin: 0;
  padding: 0;
}
.messagetext {
  margin: 0;
  padding:0;
  position: relative;
  color: white;
  width: 100%;
  top: -2px;
  word-wrap: break-word;
}
.messagetexthope {
  margin: 0;
  padding:0;
  position: relative;
  color: black;
  width: 100%;
  top: -2px;
  word-wrap: break-word;
}
#wip {
  color:white;
  font-family: "Roboto";
}
.action{
  height: 50px;
  position: absolute;
  bottom:0;
  width: 50%;
  text-align: center;
}
.action:hover{
  background-color: #4d6470;
  box-shadow: inset 0px 5px 5px -2px rgba(0,0,0,0.75);
}
#action1{
  left: 0;
}
#action2{
  right:0;
}
.actionbutton{
  color: white;
  font-family: "Roboto", "Sans-Serif";
  font-size: 30px;
}
    </style>
    <link href="https://fonts.googleapis.com/css?family=Quicksand|Roboto" rel="stylesheet">
  </head>
  <body>
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
      $(function () {
        var socket = io();
        $(document).ready(function(){
          var msgheight = $(window).height() - 150;
          color = 0;
          rbowcolor = 0;
          defaultroom = "public";
          $("#messages").attr('style',' overflow-y: scroll; overflow-x: hidden; width: 100%; height: ' + msgheight.toString() +'px;');
          enteredusnm = "anonymous";
          socket.emit('join', defaultroom);
          setInterval(function(){
            $(".hope").attr("style", "background-color: hsl(" + rbowcolor + ", 100%, 50%);")
            if (rbowcolor >= 360) {
              rbowcolor = 0;
            } else {
              rbowcolor = rbowcolor + 0.5;
            }
          }, 10);
        });
        $('#input').keypress(function(e){
        if(e.keyCode==13)
          $('#send').click();
        });
        $("#action1").click(function(){
          enteredusnm = window.prompt("What is your new username?", "anonymous");
        });
        $("#action2").click(function(){
          joinroom = window.prompt("What room would you like to join?", "public");
          if (joinroom == undefined || joinroom == "" || joinroom == null) {
            return
          } else {
            socket.emit("join", joinroom);
          }
        });
        $("#send").click(function(){
          socket.emit('username', enteredusnm);
          if ($('#input').val() == '' || $('#input').val() == ' ' || $('#input').val() == '  ' || $('#input').val() == '   ' || $('#input').val() == '   ') {
            return;
          }
          socket.emit('chat message', $('#input').val());
          $('#input').val('');
          return false;
        });
        socket.on('username', function(usnm){
          receivedusnm = usnm;
        });
        socket.on('chat message', function(msg){
        if (color === 0){
          dispcolor = "#607D8B";
          color = 1;
        } else if (color === 1){
          dispcolor = "#90A4AE";
          color = 0;
        }
        if (receivedusnm.toLowerCase() !== "hope"){
          $("#messages").append("<div class=\"message\" style = \" background-color: " + dispcolor + " ;\"><p class=\"username\">" + receivedusnm + "</p><p class=\"messagetext\">" + msg + "</p></div>");
        } else if (receivedusnm.toLowerCase() == "hope") {
          $("#messages").append("<div class=\"message hope\"><p class=\"usernamehope\">" + receivedusnm + "</p><p class=\"messagetexthope\">" + msg + "</p></div>");
        }
        $("#messages").scrollTop($("#messages")[0].scrollHeight);
        });
      });
    </script>
    <div id="header">
      <p id="name">Javascript And WebSocket Chat 1.1.0</p>
      <div id="contactbar">
        <div class="action" id="action1">
          <p class="actionbutton">Change Username</p>
        </div>
        <div class="action" id="action2">
          <p class="actionbutton">Change Room</p>
        </div>
      </div>
    </div>
    <div id="body">
      <div id="messages" style=" overflow: scroll; width: 100%; height: 423px;">
        
      </div>
      <div id="sendbar">
        <div id="inputbg">
          <input id="input">
        </div>
        <button id="send" style="position: absolute; right: 2%; bottom: 17px; width: 40px;">Send</button>
      </div>
    </div>
  </body>
</html>
